package com.college.lambda.Ecommerce;

import java.util.ArrayList;
import java.util.Comparator;
import java.util.List;
import java.util.Scanner;

public class ECommerceSorting {
    public static void main(String[] args) {
        List<Product> products = new ArrayList<>();
        products.add(new Product("Headphones", 1999, 4.3, 15));
        products.add(new Product("Smartwatch", 4999, 4.7, 25));
        products.add(new Product("Keyboard", 1599, 4.1, 10));
        products.add(new Product("Monitor", 8999, 4.5, 30));

        Scanner sc = new Scanner(System.in);
        System.out.println("Choose sorting type:");
        System.out.println("1. By Price");
        System.out.println("2. By Rating");
        System.out.println("3. By Discount");
        System.out.print("Enter choice: ");
        int choice = sc.nextInt();

        // Lambda expressions implementing ProductSorter (explicit parameter types)
        ProductSorter sorter = null;

        switch (choice) {
            case 1 -> sorter = (List<Product> list) -> list.sort(Comparator.comparingDouble(Product::getPrice));
            case 2 -> sorter = (List<Product> list) -> list.sort((Product p1, Product p2) ->
                    Double.compare(p2.getRating(), p1.getRating())); // rating desc
            case 3 -> sorter = (List<Product> list) -> list.sort((Product p1, Product p2) ->
                    Double.compare(p2.getDiscount(), p1.getDiscount())); // discount desc
            default -> System.out.println("Invalid choice.");
        }

        if (sorter != null) {
            sorter.sort(products);
            System.out.println("\n--- Sorted Products ---");
            for (Product p : products) {
                System.out.println(p);
            }
        }

        sc.close();
    }
}
